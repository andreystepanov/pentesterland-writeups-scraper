import list from './'

describe('list', () => {
  test('defined', () => {
    expect(list).toBeDefined()
    expect(typeof list).toEqual('function')
  })

  test('returns writeups grouped by year', async () => {
    const writeups = await list({ group: true })
    expect(Array.isArray(writeups.unknown)).toBe(true)
  }, 5000)

  test('returns writeups in ascending order (old to new)', async () => {
    const [writeup] = await list({ order: 'asc' })
    expect(writeup.published_at).toBeNull()
  }, 5000)

  test('returns writeups filtered by year and month', async () => {
    const year = '2014'
    const month = '12'
    const [writeup] = await list({ year, month })

    expect(writeup.published.year).toEqual(year)
    expect(writeup.published.month).toEqual(month)
  }, 5000)

  test.only('returns writeups filtered by title', async () => {
    const query = 'G Suite'.toLowerCase()
    const [writeup] = await list({ title: query })

    // console.log(writeup)

    expect(writeup.title.toLowerCase().includes(query)).toBe(true)
  }, 5000)
})
